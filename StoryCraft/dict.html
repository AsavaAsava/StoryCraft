<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- CDN Link for Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <!-- Google font link -->
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet" />
    <!-- stylesheet link -->
    <link rel="stylesheet" href="dict.css" />
    <!-- Title -->
    <title>English Dictionary</title>
</head>

<body>
    <div class="wrapper">
        <header>English Dictionary</header>
        <!-- search div -->
        <div class="search">
            <input type="text" name="text" placeholder="Search a word" required />
            <i class="fas fa-search"></i>
            <span class="material-icons">close</span>
        </div>
        <p class="info-text">
            Type any existing word and press enter to get meaning, example,
            synonyms, etc.
        </p>
        <ul>
            <li class="word">
                <div class="details">
                    <p>_</p>
                    <span>___</span>
                </div>
                <i class="fas fa-volume-up" id="playSound"></i>
            </li>
            <div class="content">
                <li class="meaning">
                    <div class="details">
                        <p>Meaning</p>
                        <span>____</span>
                    </div>
                </li>
                <li class="example">
                    <div class="details">
                        <p>Example</p>
                        <span>____</span>
                    </div>
                </li>
                <li class="synonym">
                    <div class="details">
                        <p>Synonyms</p>
                        <div class="list"></div>
                    </div>
                </li>
            </div>
        </ul>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const wrapper = document.querySelector(".wrapper"),
            searchInput = wrapper.querySelector("input"),
            synonyms = wrapper.querySelector(".synonym .list"),
            volume = wrapper.querySelector(".word i"),
            removeIcon = wrapper.querySelector(".search span"),
            infoText = wrapper.querySelector(".info-text");
        let audio;

        // fetch api function
        function fetchApi(word) {
            infoText.style.color = "#000";
            wrapper.classList.remove("active");
            infoText.innerHTML = `Searching the meaning of <span>"${word}"</span>`;
            axios.get(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`)

                .then((result) => dataProcess(result.data, word));
        }

        const dataProcess = (res, w) => {
            if (res.title) {
                infoText.innerHTML = `Oh No! We cannot find the word: ${w}`;
            } else {
                wrapper.classList.add("active");
                let definitions = res[0].meanings[0].definitions[0];
                console.log({ definitions })
                phonetics = `Commonly pronounced as: ${res[0].phonetics[0].text}`;
                let audio = new Audio(res[0].phonetics[0].audio);
                document.querySelector(".word p").innerText = res[0].word;
                document.querySelector(".word span").innerText = phonetics;
                document.querySelector(".meaning span").innerText = definitions.definition;
                document.querySelector(".example span").innerText = definitions.example ?? `Sorry. Unavailable`;
                document.querySelector(".list").innerText = res[0].meanings[0].synonyms ?? `Unavailable!`;

            }

        }

        searchInput.addEventListener("keyup", (e) => {
            if (e.key == "Enter" && e.target.value) {
                fetchApi(e.target.value)
            }
        })

        removeIcon.addEventListener("click", () => {
            searchInput.value = "";
            searchInput.focus();
            wrapper.classList.remove("active");
            infoText.style.color = "#000";
            infoText.innerHTML = "Type any existing word and press enter to get meaning, example,synonyms, etc.";
        })

        document.querySelector("#playSound").addEventListener("click", () => {
            if (audio) {
                audio.play();
            }
        })
    </script>
</body>

</html>